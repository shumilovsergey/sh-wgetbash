{% extends 'base.html' %}
{% block title %}
Создать скрипт - WgetBash
{% endblock %}
{% block content %}
{% load static %}

<style>
/* Ensure light theme for script create page */
body {
    background: #ffffff !important;
    color: #0f172a !important;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .create-container {
        padding: 16px !important;
    }
    
    .create-form {
        padding: 24px !important;
    }
    
    .action-buttons {
        flex-direction: column !important;
        gap: 16px !important;
    }
    
    .button-group {
        justify-content: center !important;
    }
}
</style>

<div class="create-container" style="min-height: 100vh; background: #ffffff; padding: 32px;">
  <div style="max-width: 800px; margin: 0 auto;">
    
    <!-- Header -->
    <div style="margin-bottom: 32px;">
      <h1 style="font-size: 2rem; font-weight: 700; color: #0f172a; margin: 0 0 8px 0;">Создать новый скрипт</h1>
      <p style="font-size: 0.875rem; color: #64748b; margin: 0;">Напишите bash скрипт для автоматизации задач</p>
    </div>

    <!-- Main Form -->
    <div class="create-form" style="background: #ffffff; border: 2px solid #e2e8f0; border-radius: 4px; padding: 32px; box-shadow: 0 4px 0 rgba(0, 0, 0, 0.15); margin-bottom: 24px;">
      <form method="post" action="{% url 'api:script_create' %}">
        {% csrf_token %}
        
        <!-- Script Name -->
        <div style="margin-bottom: 24px;">
          <label for="name" style="display: block; font-size: 0.875rem; font-weight: 600; color: #0f172a; margin-bottom: 8px;">
            Название скрипта
          </label>
          <input 
            required 
            type="text" 
            autocomplete="off" 
            name="name" 
            id="name"
            maxlength="56" 
            style="width: 100%; padding: 16px; background: #ffffff; border: 2px solid #e2e8f0; border-radius: 4px; color: #0f172a; font-size: 0.875rem; transition: all 0.1s ease-out; outline: none; font-family: 'Inter', sans-serif;"
            placeholder="Введите название скрипта..."
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 2px 0 rgba(0, 0, 0, 0.1)';"
            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none';"
          >
          <p style="font-size: 0.75rem; color: #64748b; margin: 8px 0 0 0;">Максимум 56 символов</p>
        </div>

        <!-- Script Content -->
        <div style="margin-bottom: 32px;">
          <label for="text" style="display: block; font-size: 0.875rem; font-weight: 600; color: #0f172a; margin-bottom: 8px;">
            Содержимое скрипта
          </label>
          <textarea 
            autocomplete="off" 
            required 
            name="text" 
            id="text"
            rows="20"
            style="width: 100%; min-height: 400px; padding: 16px; background: #ffffff; border: 2px solid #e2e8f0; border-radius: 4px; color: #0f172a; font-size: 0.875rem; transition: all 0.1s ease-out; outline: none; font-family: 'JetBrains Mono', 'Fira Code', 'Monaco', 'Consolas', monospace; line-height: 1.5; resize: vertical;"
            placeholder="Здесь пишите только команды вашего скрипта...&#10;Строка #!/bin/bash и хэндлер ошибок будут добавлены автоматически.&#10;&#10;Например:&#10;echo 'Привет, мир!'"
            onfocus="this.style.borderColor='#2563eb'; this.style.boxShadow='0 2px 0 rgba(0, 0, 0, 0.1)';"
            onblur="this.style.borderColor='#e2e8f0'; this.style.boxShadow='none';"
          ></textarea>
          <p style="font-size: 0.75rem; color: #64748b; margin: 8px 0 0 0;">
            Напишите ваш bash скрипт. Заголовок #!/bin/bash будет добавлен автоматически при генерации.
          </p>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons" style="display: flex; align-items: center; justify-content: space-between; padding-top: 24px; border-top: 2px solid #e2e8f0;">
          <!-- Back Button -->
          <a href="{% url 'api:script_list' %}" 
             style="display: inline-flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 4px; text-decoration: none; cursor: pointer; border: 2px solid #e2e8f0; outline: none; background: #ffffff; color: #475569; box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1); transition: all 0.1s ease-out;"
             title="Назад к списку"
             onmouseover="this.style.background='#f1f5f9'; this.style.color='#0f172a'; this.style.borderColor='#cbd5e1'; this.style.boxShadow='0 4px 0 rgba(0, 0, 0, 0.15)';"
             onmouseout="this.style.background='#ffffff'; this.style.color='#475569'; this.style.borderColor='#e2e8f0'; this.style.boxShadow='0 2px 0 rgba(0, 0, 0, 0.1)';">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path>
            </svg>
          </a>
          
          <!-- Save Button -->
          <button type="submit" 
                  style="display: inline-flex; align-items: center; justify-content: center; width: 48px; height: 48px; border-radius: 4px; cursor: pointer; border: 2px solid #2563eb; outline: none; background: #2563eb; color: white; box-shadow: 0 2px 0 rgba(0, 0, 0, 0.1); transition: all 0.1s ease-out;"
                  title="Сохранить скрипт"
                  onmouseover="this.style.background='#1d4ed8'; this.style.borderColor='#1d4ed8'; this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 0 rgba(0, 0, 0, 0.15)';"
                  onmouseout="this.style.background='#2563eb'; this.style.borderColor='#2563eb'; this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 0 rgba(0, 0, 0, 0.1)';">
            <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
            </svg>
          </button>
        </div>
      </form>
    </div>

  </div>
</div>

{% endblock %}